<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QCBOR: q_useful_buf_c Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QCBOR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle"><div class="title">q_useful_buf_c Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_useful_buf_8h_source.html">UsefulBuf.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:ab6679b8a3625461c4f6c523048234022" id="r_ab6679b8a3625461c4f6c523048234022"><td class="memItemLeft" align="right" valign="top"><a id="ab6679b8a3625461c4f6c523048234022" name="ab6679b8a3625461c4f6c523048234022"></a>
const void *&#160;</td><td class="memItemRight" valign="bottom"><b>ptr</b></td></tr>
<tr class="separator:ab6679b8a3625461c4f6c523048234022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7360b55975153b822efc5217b7734e6a" id="r_a7360b55975153b822efc5217b7734e6a"><td class="memItemLeft" align="right" valign="top"><a id="a7360b55975153b822efc5217b7734e6a" name="a7360b55975153b822efc5217b7734e6a"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>len</b></td></tr>
<tr class="separator:a7360b55975153b822efc5217b7734e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> and <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> are simple data structures to hold a pointer and length for binary data. In C99 this data structure can be passed on the stack making a lot of code cleaner than carrying around a pointer and length as two parameters.</p>
<p>This is also conducive to secure coding practice as the length is always carried with the pointer and the convention for handling a pointer and a length is clear.</p>
<p>While it might be possible to write buffer and pointer code more efficiently in some use cases, the thought is that unless there is an extreme need for performance (e.g., you are building a gigabit-per-second IP router), it is probably better to have cleaner code you can be most certain about the security of.</p>
<p>The non-const <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> is usually used to refer an empty buffer to be filled in. The length is the size of the buffer.</p>
<p>The const <a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> is usually used to refer to some data that has been filled in. The length is amount of valid data pointed to.</p>
<p>A common use mode is to pass a <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> to a function, the function puts some data in it, then the function returns a <a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> refering to the data. The <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> is a non-const "in" parameter and the <a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> is a const "out" parameter so the constness stays correct. There is no single "in,out" parameter (if there was, it would have to be non-const). Note that the pointer returned in the <a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> usually ends up being the same pointer passed in as a <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a>, though this is not striclty required.</p>
<p>A <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> is null, it has no value, when <code>ptr</code> in it is <code>NULL</code>.</p>
<p>There are functions and macros for the following:</p><ul>
<li>Initializing</li>
<li>Create initialized const <a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> from compiler literals</li>
<li>Create initialized const <a class="el" href="_useful_buf_8h.html#ad5ebb3732bd85ff732cc817fc280cc64">UsefulBufC</a> from NULL-terminated string</li>
<li>Make an empty <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> on the stack</li>
<li>Checking whether a <a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> is null, empty or both</li>
<li>Copying, copying with offset, copying head or tail</li>
<li>Comparing and finding substrings</li>
</ul>
<p>See also <a class="el" href="_useful_buf_8h.html#a83f01ed9a781335a27e651b4d0fe99cd">UsefulOutBuf</a>. It is a richer structure that has both the size of the valid data and the size of the buffer.</p>
<p><a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> is only 16 or 8 bytes on a 64- or 32-bit machine so it can go on the stack and be a function parameter or return value.</p>
<p>Another way to look at it is this. C has the NULL-terminated string as a means for handling text strings, but no means or convention for binary strings. Other languages do have such means, Rust, an efficient compiled language, for example.</p>
<p><a class="el" href="_useful_buf_8h.html#a28f72e9ae0a9419e46735e16f8c2f449">UsefulBuf</a> is kind of like the Useful Pot Pooh gave Eeyore on his birthday. Eeyore's balloon fits beautifully, "it goes in and
out like anything". </p>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>/Users/lgl/Code/QCBOR/dev/inc/qcbor/<a class="el" href="_useful_buf_8h_source.html">UsefulBuf.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
