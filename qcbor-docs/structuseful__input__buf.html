<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QCBOR: useful_input_buf Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">QCBOR
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">useful_input_buf Struct Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_useful_buf_8h_source.html">UsefulBuf.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="_useful_buf_8h.html#a40147dc1c6e6ab03d7690b195b21603f">UsefulInputBuf</a> is the counterpart to <a class="el" href="_useful_buf_8h.html#a83f01ed9a781335a27e651b4d0fe99cd">UsefulOutBuf</a>. It is for parsing data received. Initialize it with the data from the network. Then use the functions like <a class="el" href="_useful_buf_8h.html#a4e4d98ccbb7306a3a770d17e6713871b" title="Get pointer to bytes out of the input buffer.">UsefulInputBuf_GetBytes()</a> to get data chunks of various types. A position cursor is maintained internally.</p>
<p>As long as the functions here are used, there will never be any reference off the end of the given buffer (except <a class="el" href="_useful_buf_8h.html#a3074cca73dd828d5d60c7091e5ec7297" title="Alters the input buffer length (use with caution).">UsefulInputBuf_SetBufferLength()</a>). This is true even if they are called incorrectly, an attempt is made to seek off the end of the buffer or such. This makes it easier to write safe and correct code. For example, the QCBOR decoder implementation is safer and easier to review through its use of <a class="el" href="_useful_buf_8h.html#a40147dc1c6e6ab03d7690b195b21603f">UsefulInputBuf</a>.</p>
<p><a class="el" href="_useful_buf_8h.html#a40147dc1c6e6ab03d7690b195b21603f">UsefulInputBuf</a> maintains an internal error state. The intended use is fetching data chunks without any error checks until the end. If there was any error, such as an attempt to fetch data off the end, the error state is entered and no further data will be returned. In the error state the <code>UsefulInputBuf_GetXxxx()</code> functions return 0, or <code>NULL</code> or <a class="el" href="_useful_buf_8h.html#aef281b38ce49e9413dad0893d225c70d">NULLUsefulBufC</a>. As long as null is not dereferenced, the error check can be put off until the end, simplifying the calling code.</p>
<p>The integer and float parsing expects network byte order (big endian). Network byte order is what is used by TCP/IP, CBOR and most internet protocols.</p>
<p>Lots of inline functions are used to keep code size down. The optimizer, particularly with the <code>-Os</code> or <code>-O3</code>, also reduces code size a lot. The only non-inline code is <a class="el" href="_useful_buf_8h.html#a4e4d98ccbb7306a3a770d17e6713871b" title="Get pointer to bytes out of the input buffer.">UsefulInputBuf_GetBytes()</a>. It is less than 100 bytes so use of <a class="el" href="_useful_buf_8h.html#a40147dc1c6e6ab03d7690b195b21603f">UsefulInputBuf</a> doesn't add much code for all the messy hard-to-get right issues with parsing binary protocols in C that it solves.</p>
<p>The parse context size is:</p><ul>
<li>64-bit machine: 16 + 8 + 2 + 1 (+ 5 bytes padding to align) = 32 bytes</li>
<li>32-bit machine: 8 + 4 + 2 + 1 (+ 1 byte padding to align) = 16 bytes </li>
</ul>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>/Users/lgl/Code/QCBOR/dev/inc/qcbor/<a class="el" href="_useful_buf_8h_source.html">UsefulBuf.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
